(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{166:function(e,t,r){"use strict";r.r(t);r(88),r(290),r(50),r(203),r(37),r(210),r(55),r(68);var n=r(14),o=(r(45),r(6)),c=r(25),l=r(9),f=r(23),d=r(17),h=r(10),m=r(15),y=r(24),v=r(132),x=r(280),O=r(281);function j(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function w(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?j(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):j(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(h.a)(e);if(t){var o=Object(h.a)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Object(d.a)(this,r)}}v.a.plugin(x.a),v.a.plugin(O.a);var R=function e(){Object(l.a)(this,e)},T=function(e){Object(f.a)(r,e);var t=k(r);function r(){return Object(l.a)(this,r),t.apply(this,arguments)}return r}(R);var D=r(275),_=r.n(D);function P(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return S(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return S(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,l=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return c=e.done,e},e:function(e){l=!0,o=e},f:function(){try{c||null==r.return||r.return()}finally{if(l)throw o}}}}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}function A(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function I(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?A(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):A(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}function z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(h.a)(e);if(t){var o=Object(h.a)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Object(d.a)(this,r)}}var E,G=function(e,t,r,desc){var n,o=arguments.length,c=o<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,r):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(m.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,r,desc);else for(var i=e.length-1;i>=0;i--)(n=e[i])&&(c=(o<3?n(c):o>3?n(t,r,c):n(t,r))||c);return o>3&&c&&Object.defineProperty(t,r,c),c},L=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(e.name,function(){function r(){Object(l.a)(this,r),this.db=new v.a(e.name,t)}var n,f,d,h,m,y;return Object(c.a)(r,[{key:"save",value:(y=Object(o.a)(regeneratorRuntime.mark((function e(data){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=new Date,!("_id"in data)){e.next=7;break}return e.next=4,this.db.put(w(w({},data),{},{$modifiedAt:t}));case 4:return e.abrupt("return",e.sent);case 7:return e.next=9,this.db.post(w(w({},data),{},{$createdAt:t,$modifiedAt:t}));case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e,this)}))),function(e){return y.apply(this,arguments)})},{key:"delete",value:(m=Object(o.a)(regeneratorRuntime.mark((function e(data,t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t&&data instanceof T){e.next=5;break}return e.next=3,this.db.remove(data);case 3:e.next=8;break;case 5:return r=new Date,e.next=8,this.db.put(w(w({},data),{},{$deletedAt:r}));case 8:case"end":return e.stop()}}),e,this)}))),function(e,t){return m.apply(this,arguments)})},{key:"getAll",value:(h=Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db.allDocs({include_docs:!0});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(){return h.apply(this,arguments)})},{key:"get",value:(d=Object(o.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db.get(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return d.apply(this,arguments)})},{key:"createIndex",value:(f=Object(o.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db.createIndex(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return f.apply(this,arguments)})},{key:"find",value:(n=Object(o.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db.find(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"subscribe",value:function(e){this.db.changes({live:!0}).on("change",(function(t){return e.change&&e.change(t)})).on("complete",(function(t){return e.complete&&e.complete(t)})).on("error",(function(t){return e.error&&e.error(t)}))}}]),r}());return new r}(function(e){Object(f.a)(r,e);var t=z(r);function r(){return Object(l.a)(this,r),t.apply(this,arguments)}return r}(R)),$=E=function(e){Object(f.a)(x,e);var t,r,n,d,h,m,y,v=z(x);function x(){var e;return Object(l.a)(this,x),(e=v.apply(this,arguments))._timerDatas=[],e._globalTimer=null,e._jingle=new Audio(_.a),e}return Object(c.a)(x,[{key:"initialize",value:function(){console.log("TimerModule initialize"),this._jingle.volume=.1}},{key:"addTimer",value:function(e){console.log("addTimer"),this._jingle.muted=!0,this._jingle.play(),this._timerDatas.push(e)}},{key:"updateTimer",value:function(e){var t=this._timerDatas.findIndex((function(t){return t.id===e.id}));t>=0&&Object.assign(this._timerDatas[t],e)}},{key:"removeTimer",value:function(e){console.log({list:this._timerDatas});var t=this._timerDatas.findIndex((function(t){return t.id===e}));t>=0&&this._timerDatas.splice(t,1)}},{key:"setGlobalTimer",value:function(e){this._globalTimer=e}},{key:"load",value:(y=Object(o.a)(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.getAll();case 2:return e.sent.rows.forEach((function(e){var r=e.doc;r&&t.addTimer({id:r._id,begin:r.begin,duration:r.duration,name:r.name,state:r.state,left:r.duration})})),e.next=7,this.updateGlobalTimer();case 7:case"end":return e.stop()}}),e,this)}))),function(){return y.apply(this,arguments)})},{key:"add",value:(m=Object(o.a)(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("add"),e.next=3,L.save(t);case 3:return r=e.sent,n=I(I({},t),{},{id:r.id,left:t.duration,begin:null,state:"pause"}),this.addTimer(n),e.next=8,this.updateGlobalTimer();case 8:case"end":return e.stop()}}),e,this)}))),function(e){return m.apply(this,arguments)})},{key:"update",value:(h=Object(o.a)(regeneratorRuntime.mark((function e(t){var r,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.timers.find((function(e){return e.id===t.id}))){e.next=3;break}throw new Error("timer not found:"+t.id);case 3:if(n=!1,"play"===t.state&&"pause"===r.state&&(t.begin=(new Date).getTime(),t.left&&(t.begin-=t.duration-t.left),n=!0),"pause"===t.state&&"play"===r.state&&(t.begin=null,n=!0),!n){e.next=13;break}return e.next=9,L.get(t.id);case 9:return o=e.sent,e.next=12,L.save(I(I({},o),t));case 12:e.sent;case 13:return this.updateTimer(t),e.next=16,this.updateGlobalTimer();case 16:case"end":return e.stop()}}),e,this)}))),function(e){return h.apply(this,arguments)})},{key:"remove",value:(d=Object(o.a)(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("remove",{list:JSON.stringify(this._timerDatas)}),e.next=3,L.get(t);case 3:return r=e.sent,e.next=6,L.delete(r);case 6:return this.removeTimer(t),e.next=9,this.updateGlobalTimer();case 9:case"end":return e.stop()}}),e,this)}))),function(e){return d.apply(this,arguments)})},{key:"play",value:(n=Object(o.a)(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=this.timers.find((function(e){return e.id===t})))){e.next=4;break}return e.next=4,this.update(I(I({},r),{},{state:"play"}));case 4:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"pause",value:(r=Object(o.a)(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=this.timers.find((function(e){return e.id===t})))){e.next=4;break}return e.next=4,this.update(I(I({},r),{},{state:"pause"}));case 4:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"reset",value:(t=Object(o.a)(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=this.timers.find((function(e){return e.id===t})))){e.next=4;break}return e.next=4,this.update(I(I({},r),{},{state:"pause",left:r.duration}));case 4:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"updateGlobalTimer",value:function(){var e=-1!==this._timerDatas.findIndex((function(e){return"play"===e.state}));e&&!this._globalTimer&&this.setGlobalTimer(setInterval((function(e){return e.dispatch("updateLeft")}),E.INTERVAL,this.context)),!e&&this._globalTimer&&(clearInterval(this._globalTimer),this.setGlobalTimer(null))}},{key:"updateLeft",value:function(){console.log("updateLeft");var e,t=(new Date).getTime(),r=P(this._timerDatas);try{for(r.s();!(e=r.n()).done;){var n=e.value;if("play"===n.state){var o=n.begin||(new Date).getTime(),c=Math.max(o+n.duration-t,0),l=0===c?"ring":"play";this.update(I(I({},n),{},{left:c,state:l,begin:o})),"ring"===l&&(this._jingle.muted=!1,this._jingle.play())}}}catch(e){r.e(e)}finally{r.f()}}},{key:"timers",get:function(){return this._timerDatas}}]),x}(y.d);$.INTERVAL=16,G([y.a],$.prototype,"initialize",null),G([y.c],$.prototype,"addTimer",null),G([y.c],$.prototype,"updateTimer",null),G([y.c],$.prototype,"removeTimer",null),G([y.c],$.prototype,"setGlobalTimer",null),G([y.a],$.prototype,"load",null),G([y.a],$.prototype,"add",null),G([y.a],$.prototype,"update",null),G([y.a],$.prototype,"remove",null),G([y.a],$.prototype,"play",null),G([y.a],$.prototype,"pause",null),G([y.a],$.prototype,"reset",null),G([y.a],$.prototype,"updateGlobalTimer",null),G([y.a],$.prototype,"updateLeft",null),$=E=G([Object(y.b)({name:"timer",stateFactory:!0,namespaced:!0})],$);t.default=$},209:function(e,t,r){var content=r(326);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(87).default)("56b15182",content,!0,{sourceMap:!1})},275:function(e,t,r){e.exports=r.p+"assets/sounds/se_maoudamashii_jingle03.mp3"},282:function(e,t,r){"use strict";r(325);var n=r(83),component=Object(n.a)({},(function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("Nuxt")],1)}),[],!1,null,null,null);t.a=component.exports},294:function(e,t,r){"use strict";r.r(t),r.d(t,"plugins",(function(){return h})),r.d(t,"initialiseStores",(function(){return d})),r.d(t,"timerStore",(function(){return n}));var n,o=r(1),c=r(71),l=r(24),f=r(166);function d(e){(n=Object(l.e)(f.default,e)).initialize()}o.a.use(c.a);var h=[function(e){return d(e)}]},295:function(e,t,r){r(296),e.exports=r(297)},325:function(e,t,r){"use strict";r(209)},326:function(e,t,r){(t=r(86)(!1)).push([e.i,'html{font-family:"Source Sans Pro",-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;font-size:16px;word-spacing:1px;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;box-sizing:border-box}*,:after,:before{box-sizing:border-box;margin:0}.button--green{display:inline-block;border-radius:4px;border:1px solid #3b8070;color:#3b8070;text-decoration:none;padding:10px 30px}.button--green:hover{color:#fff;background-color:#3b8070}.button--grey{display:inline-block;border-radius:4px;border:1px solid #35495e;color:#35495e;text-decoration:none;padding:10px 30px;margin-left:15px}.button--grey:hover{color:#fff;background-color:#35495e}',""]),e.exports=t},327:function(e,t){},342:function(e,t){},344:function(e,t){},358:function(e,t){},360:function(e,t){},366:function(e,t){}},[[295,3,1,4]]]);